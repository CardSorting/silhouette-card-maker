<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Silhouette Card Maker{% endblock %}</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    {% block extra_css %}{% endblock %}
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🎴</text></svg>">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>🎴 Silhouette Card Maker</h1>
            <p class="subtitle">{% block subtitle %}Create custom card PDFs with registration marks for silhouette cutting machines{% endblock %}</p>
            
            {% if saved_offset %}
            <div class="offset-display">
                <strong>📍 Saved Offset:</strong> X: {{ saved_offset.x_offset }}, Y: {{ saved_offset.y_offset }}
            </div>
            {% endif %}
        </header>

        <!-- Version Info -->
        {% block version_info %}
        <div class="version-info">
            <strong>🚀 Enhanced Flask Version</strong> - All CLI features + Web interface<br>
            <small>Supports plugins, offset correction, image output, and advanced options</small>
        </div>
        {% endblock %}

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                {% for message in messages %}
                    <div class="alert {% if 'Error' in message or 'error' in message %}alert-error{% else %}alert-success{% endif %}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <!-- Utility Navigation -->
        {% block utility_nav %}
        <nav class="utility-buttons">
            <a href="{{ url_for('main.index') }}" class="utility-btn">
                🏠 Home
            </a>
            <a href="{{ url_for('main.grid_upload') }}" class="utility-btn">
                📊 Grid Upload
            </a>
            <a href="{{ url_for('offset.offset_pdf') }}" class="utility-btn">
                📐 PDF Offset Tool
            </a>
            <a href="{{ url_for('calibration.calibration') }}" class="utility-btn">
                🎯 Generate Calibration
            </a>
            <form method="POST" action="{{ url_for('main.cleanup') }}" style="display: inline;">
                <button type="submit" class="utility-btn danger-btn">🗑️ Clean Game Dirs</button>
            </form>
            <a href="{{ url_for('api.version') }}" class="utility-btn">
                ℹ️ Version Info
            </a>
        </nav>
        {% endblock %}

        <!-- Main Content -->
        <main class="main-content">
            {% block content %}{% endblock %}
        </main>

        <!-- Footer -->
        <footer class="footer">
            {% block footer %}
            <div class="card-reference">
                <h4>📋 Card Size Reference</h4>
                <ul>
                    <li><strong>Standard (63x88mm):</strong> Magic, Pokémon, Lorcana, One Piece</li>
                    <li><strong>Japanese (59x86mm):</strong> Yu-Gi-Oh!</li>
                    <li><strong>Poker (2.5x3.5in):</strong> Traditional playing cards</li>
                    <li><strong>Bridge (2.25x3.5in):</strong> Bridge cards</li>
                    <li><strong>Tarot (2.75x4.75in):</strong> Tarot cards</li>
                    <li><strong>Domino (1.75x3.5in):</strong> Domino cards</li>
                </ul>
            </div>
            {% endblock %}
        </footer>
    </div>

    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>